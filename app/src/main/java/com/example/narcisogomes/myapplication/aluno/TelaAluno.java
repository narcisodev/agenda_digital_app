package com.example.narcisogomes.myapplication.aluno;import android.content.DialogInterface;import android.content.Intent;import android.os.Bundle;import android.support.design.widget.NavigationView;import android.support.v4.app.Fragment;import android.support.v4.app.FragmentManager;import android.support.v4.app.FragmentTransaction;import android.support.v4.view.GravityCompat;import android.support.v4.widget.DrawerLayout;import android.support.v7.app.ActionBarDrawerToggle;import android.support.v7.app.AlertDialog;import android.support.v7.app.AppCompatActivity;import android.support.v7.widget.Toolbar;import android.view.Menu;import android.view.MenuItem;import android.view.View;import android.widget.Toast;import com.example.narcisogomes.myapplication.R;import com.example.narcisogomes.myapplication.responsavel.FragDashboard;import com.example.narcisogomes.myapplication.util.Login;import com.example.narcisogomes.myapplication.util.Sobre;import java.util.ArrayList;public class TelaAluno extends AppCompatActivity        implements NavigationView.OnNavigationItemSelectedListener {    protected AlertDialog alerta;    protected int menu = 0;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.aluno_activity_tela_aluno);        Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);        setSupportActionBar(toolbar);        getSupportActionBar().setTitle("Área do Aluno");        DrawerLayout drawer = (DrawerLayout) findViewById(R.id.drawer_layout);        ActionBarDrawerToggle toggle = new ActionBarDrawerToggle(                this, drawer, toolbar, R.string.navigation_drawer_open, R.string.navigation_drawer_close);        drawer.addDrawerListener(toggle);        toggle.syncState();        NavigationView navigationView = (NavigationView) findViewById(R.id.nav_view);        navigationView.setNavigationItemSelectedListener(this);        //iniciar com o fragment FragTarefas aberto        getSupportFragmentManager().beginTransaction().replace(R.id.frame_fragments, new FragHome()).commit();    }    @Override    public void onBackPressed() {        DrawerLayout drawer = (DrawerLayout) findViewById(R.id.drawer_layout);        if (drawer.isDrawerOpen(GravityCompat.START)) {            drawer.closeDrawer(GravityCompat.START);        } else {            alertConfirmaSair();        }    }    @Override    public boolean onCreateOptionsMenu(Menu menu) {        // Inflate the menu; this adds items to the action bar if it is present.        getMenuInflater().inflate(R.menu.menu_frag, menu);        if (this.menu == 1) {            MenuItem menu_listar_tarefas = menu.findItem(R.id.action_listar_tarefas);            menu_listar_tarefas.setVisible(true);            MenuItem menu_listar_materias = menu.findItem(R.id.action_listar_disciplinas);            menu_listar_materias.setVisible(true);        }        return true;    }    @Override    public boolean onOptionsItemSelected(MenuItem item) {        // Handle action bar item clicks here. The action bar will        // automatically handle clicks on the Home/Up button, so long        // as you specify a parent activity in AndroidManifest.xml.        int id = item.getItemId();        //noinspection SimplifiableIfStatement        if (id == R.id.action_settings) {            return true;        }        if (id == R.id.action_logoff) {            alertConfirmaSair();        }        if(id == R.id.action_listar_disciplinas){            getSupportFragmentManager().beginTransaction().replace(R.id.frame_fragments, new FragListaMaterias()).commit();        }        if(id == R.id.action_listar_tarefas){            //getSupportFragmentManager().beginTransaction().replace(R.id.frame_fragments, new FragListaTodasAtv()).commit();        }        return super.onOptionsItemSelected(item);    }    @SuppressWarnings("StatementWithEmptyBody")    @Override    public boolean onNavigationItemSelected(MenuItem item) {        // Handle navigation view item clicks here.        Fragment fragment = null;        int id = item.getItemId();        menu = 0;        switch (id) {            case R.id.nav_home:                invalidateOptionsMenu();                fragment = new FragHome();                break;            case R.id.nav_atv_aula:                menu = 1;                invalidateOptionsMenu();                fragment = new FragListaMaterias();                break;            case R.id.nav_rel_acad:                invalidateOptionsMenu();                fragment = new FragRelatorioAcademico();                break;            case R.id.nav_consul_notas:                invalidateOptionsMenu();                fragment = new FragConsultarNotas();                break;            case R.id.nav_consul_faltas:                invalidateOptionsMenu();                fragment = new FragConsultarFaltas();                break;            case R.id.sobre:                invalidateOptionsMenu();                fragment = new Sobre();                break;        }        if (fragment != null) {            FragmentManager fragmentManager = getSupportFragmentManager();            FragmentTransaction ft = fragmentManager.beginTransaction();            ft.replace(R.id.frame_fragments, fragment);            //ft.addToBackStack(null);            ft.commit();        }        DrawerLayout drawer = (DrawerLayout) findViewById(R.id.drawer_layout);        drawer.closeDrawer(GravityCompat.START);        return true;    }    private void alertConfirmaSair() {        //Cria o gerador do AlertDialog        AlertDialog.Builder builder = new AlertDialog.Builder(this);        //define o titulo        builder.setTitle("Atenção!");        //define a mensagem        builder.setMessage("Tem serteza que deseja sair?");        //define um botão como positivo        builder.setPositiveButton("Sim", new DialogInterface.OnClickListener() {            public void onClick(DialogInterface arg0, int arg1) {                TelaAluno.super.onBackPressed();            }        });        //define um botão como negativo.        builder.setNegativeButton("Não", new DialogInterface.OnClickListener() {            public void onClick(DialogInterface arg0, int arg1) {            }        });        //cria o AlertDialog        alerta = builder.create();        //Exibe        alerta.show();    }}